# 感恩之旅 - 云平台部署快速指南

## 🎯 部署方案推荐

### 方案一：腾讯云轻量应用服务器（推荐新手）
**成本：约50元/月**
**优势：** 操作简单、性价比高、一键部署

### 方案二：Vercel免费部署（推荐测试）
**成本：免费**
**优势：** 完全免费、自动HTTPS、全球CDN

### 方案三：阿里云ECS（推荐生产）
**成本：约80元/月**
**优势：** 稳定性高、性能好、国内访问快

## 🚀 腾讯云部署（10分钟完成）

### 步骤1：购买服务器
1. 访问：https://console.cloud.tencent.com/lighthouse
2. 点击"新建实例"
3. 选择配置：
   - 地域：广州/上海/北京
   - 镜像：Ubuntu 20.04
   - 套餐：1核2G5M（50元/月）
4. 购买并获取服务器IP

### 步骤2：一键部署脚本
```bash
# 在本地创建部署脚本
echo '#!/bin/bash
# 腾讯云一键部署脚本
echo "正在连接到腾讯云服务器..."
ssh root@您的服务器IP << EOF
# 更新系统
apt update && apt upgrade -y
# 安装Node.js
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
apt-get install -y nodejs
# 创建项目目录
mkdir -p /home/gratitude-journey
cd /home/gratitude-journey
# 上传文件（使用SCP）
EOF

# 上传项目文件
echo "上传项目文件..."
scp -r d:/下载/project_11/* root@您的服务器IP:/home/gratitude-journey/

# 执行部署
echo "开始部署..."
ssh root@您的服务器IP << EOF
cd /home/gratitude-journey
npm install
# 使用PM2保持服务运行
npm install -g pm2
pm2 start server.js --name "gratitude-journey"
pm2 startup
pm2 save
EOF

echo "✅ 部署完成！访问地址：http://您的服务器IP:3000"' > deploy-tencent.sh

# 执行部署
chmod +x deploy-tencent.sh
./deploy-tencent.sh
```

## 🌐 Vercel免费部署（5分钟完成）

### 步骤1：准备GitHub仓库
1. 在GitHub创建新仓库：gratitude-journey
2. 上传项目文件到GitHub

### 步骤2：Vercel部署
1. 访问：https://vercel.com
2. 使用GitHub账号登录
3. 点击"New Project"
4. 导入您的GitHub仓库
5. 构建设置：
   - Framework Preset: Other
   - Build Command: `npm run build`
   - Output Directory: `dist`
6. 点击"Deploy"

### 步骤3：自定义域名（可选）
1. 在Vercel项目设置中添加自定义域名
2. 在域名服务商处配置CNAME记录

## 📊 成本对比表

| 平台 | 月成本 | 适合场景 | 优势 |
|------|--------|----------|------|
| 腾讯云轻量 | 50元 | 个人项目/测试 | 性价比高、操作简单 |
| 阿里云ECS | 80元 | 生产环境 | 稳定性好、性能强 |
| Vercel | 免费 | 测试/演示 | 完全免费、全球CDN |
| Netlify | 免费 | 静态网站 | 自动部署、HTTPS |

## 🔧 常见问题解决

### 问题1：端口无法访问
```bash
# 检查防火墙规则
sudo ufw status
sudo ufw allow 3000
sudo ufw enable

# 检查服务状态
pm2 status
systemctl status pm2-root
```

### 问题2：域名解析失败
```bash
# 检查DNS解析
dig yourdomain.com
nslookup yourdomain.com

# 临时测试（修改本地hosts）
echo "服务器IP yourdomain.com" >> /etc/hosts
```

### 问题3：内存不足
```bash
# 查看内存使用
free -h

# 优化Node.js内存
pm2 start server.js --max-memory-restart 300M

# 增加交换空间
sudo fallocate -l 1G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

## 📱 移动端测试

部署完成后，请使用手机测试：
1. 在手机浏览器访问您的网站
2. 测试触摸滑动、图片加载
3. 检查响应式布局
4. 测试音乐播放功能

## 🔄 自动更新部署

### GitHub Actions自动部署
```yaml
# .github/workflows/deploy.yml
name: Deploy to Tencent Cloud
on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Deploy to Server
      uses: appleboy/ssh-action@master
      with:
        host: ${{ secrets.SERVER_HOST }}
        username: ${{ secrets.SERVER_USER }}
        key: ${{ secrets.SERVER_KEY }}
        script: |
          cd /home/gratitude-journey
          git pull origin main
          npm install
          pm2 restart gratitude-journey
```

## 💡 最佳实践建议

1. **备份策略**：定期备份数据库和重要文件
2. **监控告警**：设置服务器监控和异常告警
3. **安全加固**：定期更新系统补丁，使用强密码
4. **性能优化**：启用CDN加速，压缩静态资源
5. **日志管理**：配置日志轮转，定期清理

## 🎉 部署成功标志

- ✅ 网站可以通过IP地址访问
- ✅ 移动端显示正常
- ✅ 音乐播放功能正常
- ✅ 图片加载流畅
- ✅ 健康检查接口返回200

---

**需要帮助？** 如果您在部署过程中遇到任何问题，可以：
1. 查看详细的部署说明文档
2. 检查服务器日志：`pm2 logs gratitude-journey`
3. 测试健康检查：`curl http://localhost:3000/health`
4. 联系技术支持

祝您部署顺利！🎊